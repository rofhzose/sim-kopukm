# ==========================================
# ğŸ§± Gunakan Node versi stabil & ringan
# ==========================================
FROM node:20-alpine

WORKDIR /app

# ==========================================
# ğŸ“¦ Copy file konfigurasi npm
# ==========================================
COPY package*.json ./

# ==========================================
# âš™ï¸ Install dependensi lengkap (non-cache)
# ==========================================
RUN npm install --force && npm rebuild && npm cache clean --force

# ==========================================
# ğŸ“ Copy semua file backend
# ==========================================
COPY . .

# ==========================================
# ğŸŒ Expose port API backend
# ==========================================
EXPOSE 4849

# ==========================================
# ğŸš€ Jalankan backend langsung
# ==========================================
CMD ["node", "server.js"]
