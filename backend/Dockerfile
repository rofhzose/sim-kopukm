# ==========================================
# ğŸ§± 1. Gunakan Node versi stabil
# ==========================================
FROM node:20

# ==========================================
# ğŸ“‚ 2. Set working directory ke dalam container
# ==========================================
WORKDIR /app

# ==========================================
# ğŸ“¦ 3. Copy file package.json dan package-lock.json dari backend
# ==========================================
COPY backend/package*.json ./

# ==========================================
# ğŸ“¦ 4. Install dependencies
# ==========================================
RUN npm install --production

# ==========================================
# ğŸ“ 5. Copy seluruh kode backend ke dalam container
# ==========================================
COPY backend .

# ==========================================
# ğŸ”¥ 6. Expose port (ubah sesuai app lo)
# ==========================================
EXPOSE 4849

# ==========================================
# ğŸš€ 7. Jalankan aplikasi
# ==========================================
CMD ["npm", "run", "dev"]
